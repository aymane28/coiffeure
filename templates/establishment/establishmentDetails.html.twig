{% extends 'base.html.twig' %}

{% block title %}Etablissement détails{% endblock %}

{% block body %}

    <header class="py-1 border-bottom mb-3" style="background-color: #FAAA80">
        <div class="container">
            <div class="text-center my-4">
                <h1 class="fw-bolder text-white">{{ establishment.name }}</h1>
                <p class="lead mb-0 text-white">Paris</p>
            </div>
        </div>
    </header>


    <!-- Page content-->
    <div class="container">
        <div class="row">
            <!-- Blog entries-->
            <div class="col-lg-6">
                <!-- Featured blog post-->
                <div class="card mb-4">
                    <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="https://img.freepik.com/photos-gratuite/bel-homme-dans-salon-coiffure-coiffant-cheveux_1303-20978.jpg?w=740&t=st=1663192112~exp=1663192712~hmac=a2cba9a4a15c79497dd3f971b54a281df33f8216c493673c1d32619655ef752c"
                                     class="d-block w-100" alt="...">
                            </div>
                            <div class="carousel-item">
                                <img src="https://img.freepik.com/photos-gratuite/femme-au-salon-coiffure_144627-8885.jpg?w=740&t=st=1663192149~exp=1663192749~hmac=f914e89551e7cebe7623fa94a4b1832efdab945ef46b0dc24ab589681486d55a"
                                     class="d-block w-100" alt="...">
                            </div>
                            <div class="carousel-item">
                                <img src="https://img.freepik.com/photos-gratuite/salon-coiffure-feminine-faisant-coiffure-pour-femme-brune-dans-salon-beaute_176420-4465.jpg?w=740&t=st=1663192173~exp=1663192773~hmac=20333ab23ed07da5707aa75273867d8ac34cd4841fe90de42edb5d50101011d4"
                                     class="d-block w-100" alt="...">
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls"
                                data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls"
                                data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                    <div class="card-body">

                        <div class="row mb-2">
                            <div class="col">
                                <i class="bi bi-geo-alt-fill"
                                   style="color: #FAAA80"></i>
                                {{ establishment.address }}
                            </div>
                            <div class="d-flex col justify-content-end">
                                <i onclick="myFunction(this)" class="bi bi-heart"></i>
                            </div>
                        </div>


                        <div class="mb-2"><i class="bi bi-telephone"> 07 89 89 25 14</i></div>
                        {% if establishment.opening == 'closed' %}
                            <h5><span class="badge badge-pill badge-danger mb-2">Fermé - ouvre à 10h00</span></h5>
                        {% else %}
                            <h5><span class="badge rounded-pill text-bg-success mb-2"> Ouvert aujourd'hui</span></h5>
                        {% endif %}
                        <p class="card-text">{{ establishment.description }}</p>
                    </div>
                </div>

                <h3>Réservez en ligne pour un RDV</h3>
                <h6 class="font-weight-light mb-4">Confirmation immédiate</h6>

                {% include "establishment/filter-establisment.html.twig" %}

                <!-- Nested row for non-featured blog posts-->
                <div class="row">
                    {% set newArray=[] %}
                    {% for servicetype in establishment.service.servicetype %}
                        <div class="col-lg-6">
                            <div class="card mb-4">
                                <div class="card-body">
                                    <div class="row mb-3">
                                        <div class="small text-muted">{{ establishment.service.name }}</div>
                                        <div class="col-auto">
                                            <h6 class="card-title">{{ servicetype.name }}</h6>
                                        </div>
                                    </div>

                                    <div class="row mb-3">
                                        <div class="col-auto">
                                            <p class="fw-normal">Durée</p>
                                        </div>
                                        <div class="col">
                                            <h6 class="text-muted float-end">
                                                <i class="bi bi-clock-fill" style="color: #c2c2c5"></i>
                                                {{ servicetype.time }} min
                                            </h6>
                                        </div>
                                    </div>

                                    <div class="row mb-2">
                                        <div class="col-auto">
                                            <p class="fw-normal">Tarifs</p>
                                        </div>
                                        <div class="col">
                                            <h6 class="text-muted float-end">
                                                <i class="bi bi-cash-stack" style="color: #c2c2c5"></i>
                                                {{ servicetype.price }} {{ 'EUR'|currency_symbol }}
                                            </h6>
                                        </div>
                                    </div>

                                    <a type="submit" class="btn btn-dark float-end"
                                       href="{{ path('appointment', {'slugestablishment': establishment.slug, 'slugservice': establishment.service.slug, 'slugservicetype': servicetype.slug}) }}">Choisir
                                        →</a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}


                </div>
            </div>
            <!-- Side widgets-->


            <div class="col-lg-6">
                {% set newArray=[] %}
                {% for service in establishment.service %}
                {% for servicetype in service.servicetype %}

                {% set newArray = newArray|merge([service]) %}
                <form method="post"
                      action="{{ path('appointment', {'slugestablishment': establishment.slug, 'slugservice': service.slug, 'slugservicetype': servicetype.slug, 'servicetypetime': servicetype.time}) }}">
                    {% endfor %}
                    {% endfor %}
                    <!-- Search widget-->
                </form>
                <!-- Side widget-->


                <div class="card mb-4">
                    <div class="card-body">
                        <nav>
                            <div class="nav nav-tabs justify-content-center" id="nav-tab" role="tablist">
                                <button class="nav-link active flex-fill" id="nav-home-tab" style="color: #FAAA80;"
                                        data-bs-toggle="tab"
                                        data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home"
                                        aria-selected="true">Personnels
                                </button>
                                <button class="nav-link flex-fill" id="nav-profile-tab" data-bs-toggle="tab"
                                        style="color: #FAAA80;"
                                        data-bs-target="#nav-profile" type="button" role="tab"
                                        aria-controls="nav-profile" aria-selected="false">Infos générales
                                </button>
                                <button class="nav-link flex-fill" id="nav-contact-tab" data-bs-toggle="tab"
                                        style="color: #FAAA80;"
                                        data-bs-target="#nav-contact" type="button" role="tab"
                                        aria-controls="nav-contact" aria-selected="false">Avis (2)
                                </button>
                            </div>
                        </nav>
                        <div class="tab-content" id="nav-tabContent">
                            <div class="tab-pane fade show active" id="nav-home" role="tabpanel"
                                 aria-labelledby="nav-home-tab" tabindex="0">
                                <div class="row align-items-center mt-4 py-2">
                                    <div class="col-2">
                                        <img title="profile image" width="80" height="80" class="rounded-circle p-1" src="{{ asset('img/profil.png') }}">
                                    </div>
                                    <div class="col">
                                        <h6 class="ms-3">Aymane Afd</h6>
                                    </div>
                                </div>
                                <div class="row align-items-center py-2">
                                    <div class="col-2">
                                        <img title="profile image" width="80" height="80"
                                                class="rounded-circle p-1"
                                                src="{{ asset('img/profil.png') }}">
                                    </div>
                                    <div class="col">
                                        <h6 class="ms-3">Aymane Afd</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="nav-profile" role="tabpanel"
                                 aria-labelledby="nav-profile-tab" tabindex="0">

                                <div class="mt-4">
                                    <div class="h6">
                                        <i class="bi bi-clock"></i> Horaires d'ouverture :
                                    </div>
                                </div>
                                <div class="row mt-4">
                                    <div class="col-6">
                                        <h6>Lundi - Vendredi</h6>
                                        <h7>9h00 - 18h00</h7>
                                    </div>
                                    <div class="col-6">
                                        <h6>Samedi</h6>
                                        <h7>9h00 - 17h00</h7>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-12">
                                        <h6>Dimanche</h6>
                                        <h7>Fermé</h7>
                                    </div>
                                </div>

                            </div>
                            <div class="tab-pane fade" id="nav-contact" role="tabpanel"
                                 aria-labelledby="nav-contact-tab" tabindex="0">
                                <div class="mt-3">
                                    <h6>Avis clients : 2</h6>
                                </div>

                                <div class="row mt-3">
                                    <div class="col-auto align-items-center h-100">
                                        <p><i class="bi bi-star-fill"></i> 5,0</p>
                                    </div>
                                    <div class="col d-flex justify-content-end">
                                        <p class="text-secondary fs-6">28/06/2023</p>
                                    </div>
                                    <h7>Je recommande ce salon !</h7>
                                </div>
                                <hr class="my-4">
                                <div class="row mt-4">
                                    <div class="col-auto align-items-center h-100">
                                        <p><i class="bi bi-star-fill"></i> 5,0</p>
                                    </div>
                                    <div class="col d-flex justify-content-end">
                                        <p class="text-secondary fs-6">04/05/2022</p>
                                    </div>
                                    <h7>Le personnel est très gentil et à l'écoute.</h7>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="nav-disabled" role="tabpanel"
                                 aria-labelledby="nav-disabled-tab" tabindex="0">...
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-body">
                        <img  src={{ asset('img/image_localisation_establishment.jpg') }} width="300" height="300"
                             class="img-fluid d-block w-100" alt="...">

                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}







